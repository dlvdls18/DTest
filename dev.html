<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>DTest</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <h2 class="text-center m-2 mt-3 fw-lighter">DTest</h2>
  <h5 class="text-center text-secondary m-2 fw-lighter">Test and call function with random predicted arguments</h5>
  <hr>
  <div class="d-flex justify-content-center"><textarea id="editor" rows="10" class="container-fluid m-3 p-3 mb-0 font-monospace border-0 rounded bg-dark text-white" style="resize:none; outline:none; border-bottom-left-radius:0!important; border-bottom-right-radius:0!important; font-size:0.8rem;" wrap="off"></textarea></div>
  <div class="d-flex justify-content-center"><div class="container-fluid bg-light shadow-sm rounded p-3 m-3 mt-0 fw-light" style="border-top-right-radius:0!important; border-top-left-radius:0!important"><span class="m-2">Code</span><button class="btn btn-dark fw-light p-0 px-3" style="float:right" id="btn-import">Import</button></div></div>
  <input type="file" id="import-file" class="d-none">
  <div class="d-flex justify-content-center"><input type="text" class="form-control mx-3 fw-light" placeholder="Function to Test" value="greet"></div>
  <br>
  <p class="fw-light ms-3 m-2">Arguments</p>
  <div class="d-flex justify-content-center"><ul id="argument-list" class="list-group ms-3 container-fluid" style="border-bottom-right-radius:0!important; border-bottom-left-radius:0!important; margin-right:5px">
    <li class="list-group-item fw-light">name</li>
  </ul></div>
  <div class="d-flex justify-content-center"><button class="rounded border-dark fw-light text-v container-fluid mx-3" style="border-top-right-radius:0!important; border-top-left-radius:0!important">New Argument</button></div>
</body>
<script> window.onerror = document.writeln </script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/dlvdls18/DTest@main/src/dtest.js"></script>
<script>

var args = [{
  label: "name",
  conf: {
    type: 0,
    config: []
  }
}]

editor.value = `
function greet(name) {
  console.log("Hello " + name);
}
`.trim();

$("#btn-import").click(function() {
  $("#import-file").trigger("click");
});

$("#import-file").change(async function(evt) {
  var el = evt.target;
  if(!el.value.endsWith(".js")) return;
  var file = el.files[0];
  editor.value = await file.text();
});

function update() {
  requestAnimationFrame(update);
  $("#argument-list > li").click(function(evt) {
    var el = evt.target;
  });
}

</script>
</html>
